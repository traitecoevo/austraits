---
title: "austraits"
author: "Fonti Kar, Daniel Falster"
date: "2-Jun-2021"
output: 
  rmarkdown::html_vignette:
  toc: yes
vignette: >
  %\VignetteIndexEntry{austraits}
  %\VignetteEncoding{UTF-8}
  %\VignetteEngine{knitr::rmarkdown}
editor_options: 
  chunk_output_type: console
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  message = FALSE,
  warning = FALSE,
  comment = "#>"
)

library(tidyverse)
library(austraits)
```

The `austraits` package is designed to aid users to access data from AusTraits, a curated plant trait database for the Australian flora. This package contains several core functions to wrangle and visualise data. Below we included a tutorial to illustrate how to use these functions in greater detail. 

## Getting started
`austraits` is still under development. To install the current version from github 
```{r setup, eval = FALSE}
install.packages("remotes")
remotes::install_github("traitecoevo/austraits", build_vignettes = TRUE)

# Load the austraits package
library(austraits)
```

### Meta-data
```{r}
# List of all traits
austraits$definitions$traits$elements %>% names() %>% head() ; austraits$definitions$traits$elements %>% names() %>% tail() 

# Description of a particular trait, its variable type, the units the trait is measured in and the range of trait values
austraits$definitions$traits$elements$leaf_angle
```

## Extracting data
AusTraits contains 446 plant traits. In most cases, users would like to extract a subset of the dataset for their own research purposes. `extract_dataset`extracts a particular study, whereas `extract_trait`subsets by certain traits. Note that the other tables and elements of the austraits data are extracted too, not just the main trait table. See `?extract_dataset` and `?extract_trait` for more details

### Extracting by study

```{r}
# Filtering one particular study and assigning it to an object
zanne_09 <- extract_dataset(austraits, "Zanne_2009") #Extract from austraits
class(zanne_09) 
names(zanne_09) # The function extracts all the other tables and elements

# Filtering multiple studies by same lead author (e.g. Falster) and assigning it to an object
( dataset_ids <- austraits$methods$dataset_id %>% unique() ) #All possible dataset_ids 

( falster_ids <- dataset_ids[grep("Falster", dataset_ids)] )  # Extracting dataset_ids with lead author "Falster" 

falster_studies <- extract_dataset(austraits, falster_ids) # Extract from austraits
falster_studies$traits$dataset_id %>% unique() 
```

### Extracting by trait(s)
```{r}
# Filtering one particular trait and assigning it to an object
sla_data <- extract_trait(austraits, "specific_leaf_area") #Extract from austraits

# Filtering all leaf associated data and assigning it to an object
( traits <- austraits$traits$trait_name %>% unique() ) #All possible traits 

( leaf_traits <- traits[grep("leaf", traits)] )  # Extracting data where "leaf" occurs in the trait_name

leaf_data <- extract_trait(austraits, leaf_traits) # Extract from austraits
leaf_data$traits$trait_name %>% unique() 
```

### Join other information
```{r}

```

### General data visualisations
```{r}

```

